<div class="form-field">
  <h3>{{ label || inputName | titlecase }}</h3>
  <mat-chip-listbox
    class="mat-mdc-chip-set-stacked"
    [formControl]="inputControl"
    [multiple]="multiple"
    [attr.data-testid]="testid()"
  >
    <div style="display: flex; flex-direction: row; gap: 1em; flex-wrap: wrap">
      @for (o of options; track o) {
      <div class="chip-list-group">
        @if(o.items){

        <h4 style="text-align: center">{{ displayWith()(o) }}</h4>
        @for(so of o.items; track so){
        <div class="chip-list">
          <mat-chip-option #sub color="accent" [value]="so">
            {{ displayWith()(so) }}
          </mat-chip-option>
        </div>
        } } @else {
        <mat-chip-option #main color="primary" [value]="o">
          {{ displayWith()(o) }}
        </mat-chip-option>
        }
      </div>
      }
    </div>
  </mat-chip-listbox>
</div>
