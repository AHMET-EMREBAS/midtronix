<ng-container *ngIf="barcodeInputEvent$ | async"></ng-container>
<ng-container *ngIf="priceLevelInputEvent$ | async"></ng-container>

<h1>100000000011</h1>
<div class="pos-container">
  <div class="search-fields">
    <mat-form-field appearance="outline">
      <input
        matInput
        type="text"
        placeholder="Barcode"
        [formControl]="barcodeControl"
      />

      <mat-icon matIconPrefix color="primary">barcode</mat-icon>

      <button mat-icon-button matIconSuffix color="primary">
        <mat-icon>search</mat-icon>
      </button>
    </mat-form-field>

    <!-- <mdtx-sku-search [inputControl]="skuControl"></mdtx-sku-search> -->
    <mdtx-store-search [inputControl]="storeControl"></mdtx-store-search>
    <mdtx-price-level-search
      [inputControl]="priceLevelControl"
    ></mdtx-price-level-search>
  </div>

  <table mat-table [dataSource]="getItems()">
    <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->

    <!-- Position Column -->
    @for( col of ['id', 'barcode', 'price', 'quantity', 'total'] ; track col){

    <ng-container [matColumnDef]="col">
      <th mat-header-cell *matHeaderCellDef>{{ col }}</th>
      <td mat-cell *matCellDef="let row">{{ row[col] }}</td>
    </ng-container>

    }

    <tr
      mat-header-row
      *matHeaderRowDef="['id', 'barcode', 'price', 'quantity', 'total']"
    ></tr>
    <tr
      mat-row
      *matRowDef="
        let row;
        columns: ['id', 'barcode', 'price', 'quantity', 'total']
      "
    ></tr>
  </table>

  <div class="card-container">
    @for(item of getItems(); track item){

    <div class="order-item">
      <div style="display: flex; gap: 1em">
        <mdtx-card-avatar
          [title]="item.name"
          [subtitle]="item.barcode"
        ></mdtx-card-avatar>

        <div style="display: flex; flex-direction: column; gap: 0.2em">
          <div>{{ item.price }} X {{ item.quantity }}</div>
          <div>
            <strong> Total: {{ item.total }}</strong>
          </div>
        </div>
      </div>
      <mdtx-input-quantity
        [value]="item.quantity"
        (quantityValueChange)="updateQuantity($event, item)"
      ></mdtx-input-quantity>
    </div>
    }
  </div>
  <div class="summary">
    <strong>Total: {{ getTotal() }}</strong>
  </div>
</div>

{{ getItems() | json }}
